library {{pubName}}.api;

import 'package:dio/dio.dart';
import 'package:jaguar_serializer/jaguar_serializer.dart';
import 'package:jaguar_retrofit/jaguar_retrofit.dart';
import 'package:jaguar_mimetype/jaguar_mimetype.dart';

{{#apiInfo}}{{#apis}}import 'package:{{pubName}}/api/{{classFilename}}.dart';
{{/apis}}{{/apiInfo}}
{{#models}}{{#model}}import 'package:{{pubName}}/model/{{classFilename}}.dart';
{{/model}}{{/models}}


{{#jsonFormat}}
final _jsonJaguarRepo = JsonRepo()
{{#models}}{{#model}}{{^isEnum}}..add({{classname}}Serializer()){{/isEnum}}
{{/model}}{{/models}};

final Map<String, CodecRepo> _defaultConverters = {
    MimeTypes.json: _jsonJaguarRepo,
};
{{/jsonFormat}}

class {{clientName}} extends DefaultApi {
  Dio _dio;

  set dio(Dio dio) {
    _dio = dio;
    base = Route(dio.options.baseUrl).withClient(dio);
  }

  Dio get dio => _dio;

  {{clientName}}(Dio dio): super( _defaultConverters) {
    this.dio = dio;
  }
}